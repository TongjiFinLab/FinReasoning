prompt_jcd = """
【重要：输出格式要求】
你必须且仅能输出一个有效的JSON对象，不要添加任何其他文字、解释、markdown代码块标记或换行。
直接输出JSON，格式如下：

{"逻辑链条":{"score":X,"explanation":"评分原因……"},"因果深度":{"score":Y,"explanation":"评分原因……"},"专业性":{"score":Z,"explanation":"评分原因……"}}

==================================================
【评分任务】
请根据以下标准，对模型生成的回答在"论证合理性与因果深度"维度进行评分。  
该维度包含三个子项：逻辑链条（40分）、因果深度（30分）、专业性（30分）。  
每个子项必须给出一个 0–5 的离散得分，并附带简短解释（1–3 句），说明评分原因。  
请严格按照定义判断，不得自行扩展标准。

==================================================
【子维度 1：逻辑链条（40分）】
衡量是否形成自洽的 A→B→C 推理闭环。

评分标准：
- 0 分：无任何逻辑结构；句子互不相关；推理无法成立。
- 1 分：仅出现 A→B，但缺乏推导；逻辑跳跃严重；推理不完整。
- 2 分：出现 A→B→C 的雏形，但链条松散；关键逻辑缺失；解释不足。
- 3 分：基本形成 A→B→C 闭环；逻辑清晰但深度有限。
- 4 分：A→B→C 结构完整严谨；因果递进自然；无明显漏洞。
- 5 分：多层逻辑链条（如 A→B→C→D 等）；结构自洽；能识别前提与隐含假设；专业级推理体系。

==================================================
【子维度 2：因果深度（30分）】
衡量是否解释因果关系的"必然性"，而非停留在表面相关。

评分标准：
- 0 分：因果关系错误或不存在；将相关性误判为因果。
- 1 分：仅描述现象；无因果解释。
- 2 分：提供初步因果机制，但缺乏必然性论证；停留在表层。
- 3 分：清晰说明 A 导致 B 的机制；但未分析条件、边界或限制。
- 4 分：解释因果必然性；包含触发条件、机制路径、边界条件。
- 5 分：专业级因果分析；明确必要条件/充分条件、反事实推理（若 A 不发生将怎样）。

==================================================
【子维度 3：专业性（30分）】
是否符合金融专业标准（如 CFA 分析框架、投研逻辑、概念使用规范性）。

评分标准：
- 0 分：专业概念错误；违背基本财务/投研常识。
- 1 分：术语半正确；推理脱离专业实践。
- 2 分：术语和逻辑基本正确；但专业深度有限。
- 3 分：整体符合投研/财报分析逻辑；概念使用准确。
- 4 分：展现 CFA 级严谨性；体现风险意识、前提清晰、逻辑规范。
- 5 分：达到投研机构/分析师级专业性；表达严谨；概念定义精准；判断规范化。

==================================================
【JSON格式示例】
{
  "逻辑链条": {
    "score": 4,
    "explanation": "形成了完整的A→B→C推理链条，逻辑清晰，无明显漏洞。"
  },
  "因果深度": {
    "score": 3,
    "explanation": "说明了因果机制，但未深入分析边界条件。"
  },
  "专业性": {
    "score": 4,
    "explanation": "符合CFA分析框架，概念使用准确，逻辑规范。"
  }
}

【最后提醒】
- 只输出JSON，不要任何其他内容
- 不要使用markdown代码块（不要用```json或```包裹）
- explanation 必须基于评分标准，指出关键理由
- explanation 不得超过 3 句
- score 必须是 0-5 的整数

"""

prompt_fc = """
【重要：输出格式要求】
你必须且仅能输出一个有效的JSON对象，不要添加任何其他文字、解释、markdown代码块标记或换行。
直接输出JSON，格式如下：

{"事实密度":{"score":X,"explanation":"评分原因……"},"计算严谨性":{"score":Y,"explanation":"评分原因……"},"情境分析":{"score":Z,"explanation":"评分原因……"}}

==================================================
【评分任务】
请根据以下标准，对模型生成的回答在"事实准确性与情境化"维度进行评分。  
该维度包含三个子项：事实密度（40分）、计算严谨性（30分）、情境分析（30分）。  
每个子项必须给出一个 0–5 的离散得分，并附带简短解释（1–3 句），说明评分原因。  
请严格按照定义判断，不得自行扩展标准。

==================================================
【子维度 1：事实密度（40分）】
衡量回答中引用的事实、数据、指标是否充分、准确、与问题高度相关。

评分标准：
- 0 分：数据错误、编造数值，或与问题毫无关联。
- 1 分：仅引用极少量事实；关键数据缺失；相关性弱。
- 2 分：引用部分关键事实，但不够完整；存在轻微不准确或缺乏上下文。
- 3 分：引用的信息大体准确且覆盖主要要点；仍缺乏更全面的数据支持。
- 4 分：事实引用全面准确；包含关键财务指标或核心论据；信息密度高。
- 5 分：数据引用精准丰富；涵盖核心指标、辅助指标、趋势事实等；达到专业分析报告水平。

==================================================
【子维度 2：计算严谨性（30分）】
衡量模型是否进行正确的数值推导、勾稽关系检查、逻辑一致性验证。

评分标准：
- 0 分：计算结果错误；勾稽关系明显矛盾；甚至无法体现计算。
- 1 分：有计算或关系判断尝试，但多数不严谨或缺乏必要步骤。
- 2 分：基本计算正确，但公式、推导或数值支撑不充分；存在轻微漏洞。
- 3 分：整体计算过程合理；勾稽关系基本一致；偶有疏漏。
- 4 分：计算严谨；关键勾稽链条（如同比/环比、利润结构、现金流关系）自洽。
- 5 分：呈现专业级严谨度；主动验证勾稽链；数值推导扎实；无任何逻辑矛盾。

==================================================
【子维度 3：情境分析（30分）】
衡量回答是否结合行业特征、公司情境、周期背景等进行解释，而非仅机械引用数据。

评分标准：
- 0 分：无情境化解释；与行业/公司背景不符。
- 1 分：仅给出表层背景信息；未形成任何情境关联。
- 2 分：能基于行业特征做初步解释，但关联度不强或缺乏深度。
- 3 分：提供与行业或公司特征相关的情境分析；解释有一定深度。
- 4 分：情境化分析深入；能将数据、结构、行业逻辑结合起来解释含义。
- 5 分：呈现专业级情境化推理；精确连接行业机制、公司战略、周期逻辑；可解释数据背后的含义与影响。

==================================================
【JSON格式示例】
{
  "事实密度": {
    "score": 4,
    "explanation": "引用的核心数据准确且相关性强，信息覆盖较为全面。"
  },
  "计算严谨性": {
    "score": 3,
    "explanation": "主要计算过程正确，但对勾稽关系的展开仍不够充分。"
  },
  "情境分析": {
    "score": 4,
    "explanation": "结合行业结构提供了解释，情境化程度较高。"
  }
}

【最后提醒】
- 只输出JSON，不要任何其他内容
- 不要使用markdown代码块（不要用```json或```包裹）
- explanation 必须基于评分标准，指出关键理由
- explanation 不得超过 3 句
- score 必须是 0-5 的整数

"""
prompt_ca = """
【重要：输出格式要求】
你必须且仅能输出一个有效的JSON对象，不要添加任何其他文字、解释、markdown代码块标记或换行。
直接输出JSON，格式如下：

{"批判性思维":{"score":X,"explanation":"评分原因……"},"比较视角":{"score":Y,"explanation":"评分原因……"},"论点平衡性":{"score":Z,"explanation":"评分原因……"}}

==================================================
【评分任务】
请根据以下标准，对模型生成的回答在"完整性与比较分析"维度进行评分。  
该维度包含三个子项：批判性思维（40分）、比较视角（30分）、论点平衡性（30分）。  
每个子项必须给出一个 0–5 的离散得分，并附带简短解释（1–3 句），说明评分原因。  
请严格按照定义判断，不得自行扩展标准。

==================================================
【子维度 1：批判性思维（40分）】
衡量回答是否具备识别假设边界、风险因素、反例与限制条件的能力。

评分标准：
- 0 分：无批判性讨论；未识别任何风险或假设限制。
- 1 分：仅机械复述信息；缺乏对风险或边界条件的意识。
- 2 分：能识别部分风险或限制，但较为表层；缺乏结构化逻辑。
- 3 分：指出关键假设、边界或风险来源；具备基本批判性视角。
- 4 分：能系统化分析风险与限制；提出有洞察力的反例或对冲逻辑。
- 5 分：具有专业研究/投研级批判性；主动审视假设、边界、反向情境，并提出严谨的逻辑反驳与限制分析。

==================================================
【子维度 2：比较视角（30分）】
衡量是否具备对冲分析、同行比较、跨时期比较或跨结构差异分析的能力。

评分标准：
- 0 分：完全无比较或对冲视角。
- 1 分：仅提到比较对象名称，但无比较逻辑。
- 2 分：存在对比，但停留在表层（如“更高/更低”）且缺乏解释。
- 3 分：提供有效比较维度（如同行、周期、策略差异），逻辑基本清晰。
- 4 分：分析多个比较维度（结构性/周期性/对冲策略），结论合理且有深度。
- 5 分：专业级多角度比较；能提出结构性差异、行为差异、风险对冲路径，并给出严谨的解释框架。

==================================================
【子维度 3：论点平衡性（30分）】
衡量回答是否保持客观中立，在呈现观点时能兼顾多方论据，避免偏向单一结论。

评分标准：
- 0 分：明显偏颇或片面；无任何平衡性。
- 1 分：仅呈现单一观点；无反向论据或中立性。
- 2 分：提到其他观点但未展开；平衡性不足。
- 3 分：能呈现正反两面观点；保持基本客观。
- 4 分：结构化呈现多种论据；显著体现中立性、平衡性与合理取舍。
- 5 分：达到专业分析师级平衡性；能权衡不同情境/假设下的结论变化，并给出清晰的条件化判断。

==================================================
【JSON格式示例】
{
  "批判性思维": {
    "score": 4,
    "explanation": "识别了关键风险点，并系统化讨论了假设与边界条件。"
  },
  "比较视角": {
    "score": 3,
    "explanation": "给出了同行比较，但比较维度仍未完全展开。"
  },
  "论点平衡性": {
    "score": 4,
    "explanation": "论点呈现了正反双方并保持客观中立。"
  }
}

【最后提醒】
- 只输出JSON，不要任何其他内容
- 不要使用markdown代码块（不要用```json或```包裹）
- explanation 必须基于评分标准，指出关键理由
- explanation 不得超过 3 句
- score 必须是 0-5 的整数

"""
prompt_ars = """
【重要：输出格式要求】
你必须且仅能输出一个有效的JSON对象，不要添加任何其他文字、解释、markdown代码块标记或换行。
直接输出JSON，格式如下：

{"框架完整性":{"score":X,"explanation":"评分原因……"},"逻辑层次":{"score":Y,"explanation":"评分原因……"},"表达颗粒度":{"score":Z,"explanation":"评分原因……"}}

==================================================
【评分任务】
请根据以下标准，对模型生成的回答在"结构丰富度与严谨性"维度进行评分。  
该维度包含三个子项：框架完整性（40分）、逻辑层次（30分）、表达颗粒度（30分）。  
每个子项必须给出一个 0–5 的离散得分，并附带简短解释（1–3 句），说明评分原因。  
请严格按照定义判断，不得自行扩展标准。

==================================================
【子维度 1：框架完整性（40分）】
衡量回答是否构建了清晰且完整的分析框架，覆盖关键分析维度。

评分标准：
- 0 分：无结构；内容混乱；未呈现分析框架。
- 1 分：有零散分点但彼此无关；缺乏基本结构。
- 2 分：形成初步框架，但覆盖不完整；遗漏关键分析维度。
- 3 分：框架较清晰，覆盖主要维度；整体结构可理解。
- 4 分：框架完整、系统化；维度覆盖全面；呈现专业分析结构。
- 5 分：达到咨询/投研报告级框架质量；多维度系统联动；结构高度严谨且功能分区明显。

==================================================
【子维度 2：逻辑层次（30分）】
衡量是否体现了总-分-总结构、层级嵌套、段落逻辑递进等严谨的组织方式。

评分标准：
- 0 分：无逻辑层次；内容堆叠式呈现。
- 1 分：有简单分点但层级不清；段落之间无逻辑联系。
- 2 分：存在一定层次结构，但递进关系弱；组织仍较松散。
- 3 分：体现明确分层（如总-分）；逻辑关系基本清晰。
- 4 分：结构分层严谨；包含嵌套层次（如总-分-小分）；逻辑递进自然。
- 5 分：呈现专业级结构设计；层次递进、嵌套清晰；整体论证严密、组织完备。

==================================================
【子维度 3：表达颗粒度（30分）】
衡量概念、论据、推理的精确度与细节完整性，是否达到专业严谨程度。

评分标准：
- 0 分：概念模糊；表达粗糙；缺乏任何细节支撑。
- 1 分：表达基本准确，但颗粒度极粗；缺少关键定义或细节。
- 2 分：概念表达正确但不够严谨；细节覆盖有限。
- 3 分：颗粒度适中；关键概念解释正确；细节支撑较充分。
- 4 分：表达严谨、概念定义准确；细节到位，论证扎实。
- 5 分：达到专业分析师水准；概念精确定义；细节丰富但不过度；推理精细化且高度可靠。

==================================================
【JSON格式示例】
{
  "框架完整性": {
    "score": 4,
    "explanation": "分析框架完整，涵盖关键维度，结构系统化。"
  },
  "逻辑层次": {
    "score": 3,
    "explanation": "呈现清晰分层结构，但嵌套层级仍可进一步强化。"
  },
  "表达颗粒度": {
    "score": 4,
    "explanation": "概念表达严谨，细节充分，具有专业分析特征。"
  }
}

【最后提醒】
- 只输出JSON，不要任何其他内容
- 不要使用markdown代码块（不要用```json或```包裹）
- explanation 必须基于评分标准，指出关键理由
- explanation 不得超过 3 句
- 子维度的名称用中文表示，例如"框架完整性"、"逻辑层次"、"表达颗粒度"
- score 必须是 0-5 的整数

"""